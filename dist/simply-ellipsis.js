!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";const k=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}];function l(e,t){var{innerText:l,clientWidth:i,clientHeight:o}=e,{w:n,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:p,top:d,bottom:s,right:h}=(window.dom=e).getClientRects()[0];e.setAttribute("ell-value",l);let r=e.style.cssText.split(";"),c={};r.forEach(t=>{t=t.split(":");c[t[0]]=t[1]});var f,{paddingBottom:m,paddingLeft:g,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l}=window.getComputedStyle(e,"after");let y={paddingBottom:m,paddingLeft:g,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l};for(f in y)y[f]=parseInt(y[f]);var{paddingBottom:m,paddingLeft:g,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l}=y;l<=b?(b=l,c["--ell-wrap"]="pre-wrap",c["--ell-width"]=l+"px"):(c["--ell-wrap"]="nowrap",c["--ell-width"]=b+"px");var $,M=b+g+x,v=w+u+m,m=window.getComputedStyle(e,"before"),W=parseInt(m.borderWidth);p-M-W<0&&"left"===t&&(t="right"),n<h+M+W&&"right"===t&&(t="left"),d-v-W<0&&"top"===t&&(t="bottom"),a<s+v+W&&"bottom"===t&&(t="top"),k.forEach(t=>{e.classList.remove("has-ell-"+t.type)}),e.classList.add("has-ell-"+t);let T=5,L=5,E=9;switch(t){case"top":T=p-(M-i)/2,T=Math.max(T,5),T=Math.min(T,n-M-5),c["--ell-left"]=`${T}px`,c["--ell-top"]=`${d-v-W}px`,c["--ell-angle-left"]=`${p+i/2-W/2}px`,c["--ell-angle-top"]=`${d-W}px`;break;case"bottom":T=p-(M-i)/2,T=Math.max(T,5),T=Math.min(T,n-M-5),c["--ell-left"]=`${T}px`,c["--ell-top"]=`${s+W}px`,c["--ell-angle-left"]=`${p+i/2-2.5}px`,c["--ell-angle-top"]=`${s-W}px`;break;case"right":L=d-(v-o)/2,L=Math.max(L,5),L=Math.min(L,a-v-5),E=d+(o-W)/2,E=Math.max(E,9),E=Math.min(E,a-2*W-9),c["--ell-left"]=`${h+W}px`,c["--ell-top"]=`${L}px`,c["--ell-angle-left"]=`${h-W}px`,c["--ell-angle-top"]=`${E}px`;break;case"left":L=d-(v-o)/2,L=Math.max(L,5),L=Math.min(L,a-v-5),E=d+(o-W)/2,E=Math.max(E,9),E=Math.min(E,a-2*W-9),c["--ell-left"]=`${p-M-W}px`,c["--ell-top"]=`${L}px`,c["--ell-angle-left"]=`${p-W}px`,c["--ell-angle-top"]=`${E}px`}let B="";for($ in c)B+=$+":"+c[$]+";";e.style.cssText=B,e.classList.add("has-ell")}function o(){k.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.clientWidth&&l(t,e.type)})})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

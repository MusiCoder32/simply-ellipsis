!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";function l(t,e){var{innerText:l,clientWidth:i,offsetHeight:n}=t;let o=t.querySelector(".ell");o||(t.innerText="",o=document.createElement("div"),o.style.width="100%",o.style.height="100%",o.style.left="0px",o.style.top="0px",o.innerText=l,o.classList.add("ell"),t.append(o),t.setAttribute("ell-value",l));var{w:a,h:p}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:d,top:s,bottom:r,right:h}=t.getClientRects()[0];let c=t.style.cssText.split(";"),f={};c.forEach(t=>{t=t.split(":");f[t[0]]=t[1]});var g,{paddingBottom:m,paddingLeft:x,paddingRight:u,paddingTop:w,height:y,width:b,maxWidth:l}=window.getComputedStyle(t,"after");let $={paddingBottom:m,paddingLeft:x,paddingRight:u,paddingTop:w,height:y,width:b,maxWidth:l};for(g in $)$[g]=parseInt($[g]);var{paddingBottom:m,paddingLeft:x,paddingRight:u,paddingTop:w,height:y,width:b,maxWidth:l}=$;l<=b?(b=l,f["--ell-wrap"]="pre-wrap",f["--ell-width"]=l+"px",y=Math.ceil(b/l)*y):(f["--ell-wrap"]="nowrap",f["--ell-width"]=b+"px");var M,v=b+x+u,T=y+w+m,m=window.getComputedStyle(t,"before"),W=parseInt(m.borderWidth);d-v-W<0&&"left"===e&&(e="right"),a<h+v+W&&"right"===e&&(e="left"),s-T-W<0&&"top"===e&&(e="bottom"),t.classList.add("has-ell-"+(e=p<r+T+W&&"bottom"===e?"top":e));let L=5,E=5,B=9;switch(e){case"top":L=-(v-i)/2,L=Math.max(L,5-d),L=Math.min(L,a-v-5-d),f["--ell-left"]=`${L}px`,f["--ell-top"]=`${-T-W}px`,f["--ell-angle-left"]=`${(i-W)/2}px`,f["--ell-angle-top"]=`${-W}px`;break;case"bottom":L=-(v-i)/2,L=Math.max(L,5),L=Math.min(L,a-v-5-d),f["--ell-left"]=`${L}px`,f["--ell-top"]=`${n+W}px`,f["--ell-angle-left"]=`${(i-W)/2}px`,f["--ell-angle-top"]=`${n-W}px`;break;case"right":E=-(T-n)/2,E=Math.max(E,5-s),E=Math.min(E,p-T-5-s),B=(n-W)/2,B=Math.max(B,9-s),B=Math.min(B,p-2*W-9-s),f["--ell-left"]=`${i+W}px`,f["--ell-top"]=`${E}px`,f["--ell-angle-left"]=`${i-W}px`,f["--ell-angle-top"]=`${B}px`;break;case"left":E=-(T-n)/2,E=Math.max(E,5-s),E=Math.min(E,p-T-5-s),B=(n-W)/2,B=Math.max(B,9-s),B=Math.min(B,p-2*W-9-s),f["--ell-left"]=`${-v-W}px`,f["--ell-top"]=`${E}px`,f["--ell-angle-left"]=`${-W}px`,f["--ell-angle-top"]=`${B}px`}let k="";for(M in f)k+=M+":"+f[M]+";";t.style.cssText=k,t.classList.add("has-ell")}function n(){[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}].forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.clientWidth&&l(t,e.type)})})}return{setEll:n,setObserver:function(t){const l={attributes:!0,attributeFilter:["style"],subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),n(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

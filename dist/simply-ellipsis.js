!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";function l(t,e){var{innerText:l,clientWidth:i,clientHeight:n}=t,{w:o,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:d,top:p,bottom:s,right:h}=(window.dom=t).getClientRects()[0];t.setAttribute("ell-value",l);let r=t.style.cssText.split(";"),c={};r.forEach(t=>{t=t.split(":");c[t[0]]=t[1]});var f,{paddingBottom:g,paddingLeft:m,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l}=window.getComputedStyle(t,"after");let y={paddingBottom:g,paddingLeft:m,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l};for(f in y)y[f]=parseInt(y[f]);var{paddingBottom:g,paddingLeft:m,paddingRight:x,paddingTop:u,height:w,width:b,maxWidth:l}=y;l<=b?(b=l,c["--ell-wrap"]="pre-wrap",c["--ell-width"]=l+"px"):(c["--ell-wrap"]="nowrap",c["--ell-width"]=b+"px");var $,M=b+m+x,W=w+u+g,g=window.getComputedStyle(t,"before"),v=parseInt(g.borderWidth);d-M-v<0&&"left"===e&&(e="right"),o<h+M+v&&"right"===e&&(e="left"),p-W-v<0&&"top"===e&&(e="bottom"),t.classList.add("has-ell-"+(e=a<s+W+v&&"bottom"===e?"top":e));let T=5,L=5,B=9;switch(e){case"top":T=d-(M-i)/2,T=Math.max(T,5),T=Math.min(T,o-M-5),c["--ell-left"]=`${T}px`,c["--ell-top"]=`${p-W-v}px`,c["--ell-angle-left"]=`${d+i/2-v/2}px`,c["--ell-angle-top"]=`${p-v}px`;break;case"bottom":T=d-(M-i)/2,T=Math.max(T,5),T=Math.min(T,o-M-5),c["--ell-left"]=`${T}px`,c["--ell-top"]=`${s+v}px`,c["--ell-angle-left"]=`${d+i/2-2.5}px`,c["--ell-angle-top"]=`${s-v}px`;break;case"right":L=p-(W-n)/2,L=Math.max(L,5),L=Math.min(L,a-W-5),B=p+(n-v)/2,B=Math.max(B,9),B=Math.min(B,a-2*v-9),c["--ell-left"]=`${h+v}px`,c["--ell-top"]=`${L}px`,c["--ell-angle-left"]=`${h-v}px`,c["--ell-angle-top"]=`${B}px`;break;case"left":L=p-(W-n)/2,L=Math.max(L,5),L=Math.min(L,a-W-5),B=p+(n-v)/2,B=Math.max(B,9),B=Math.min(B,a-2*v-9),c["--ell-left"]=`${d-M-v}px`,c["--ell-top"]=`${L}px`,c["--ell-angle-left"]=`${d-v}px`,c["--ell-angle-top"]=`${B}px`}let E="";for($ in c)E+=$+":"+c[$]+";";t.style.cssText=E,t.classList.add("has-ell")}function n(){[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}].forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.clientWidth&&l(t,e.type)})})}return{setEll:n,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),n(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";const k=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}],t=[{class:".elln-l",type:"left"},{class:".elln-r",type:"right"},{class:".elln-t",type:"top"},{class:".elln-b",type:"bottom"}];function i(t,e){var{innerText:l,clientWidth:i,clientHeight:o}=t,{w:n,h:s}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:a,top:p,bottom:d,right:c}=t.getClientRects()[0];t.setAttribute("ell-value",l);let r=t.style.cssText.split(";"),h={};r.forEach(t=>{t=t.split(":");h[t[0]]=t[1]});let m=window.getComputedStyle(t,"after");var f,u=parseInt(m.width);parseInt(m.maxWidth)<=u?(h["--ell-wrap"]="pre-wrap",h["--ell-min-width"]=m.maxWidth,h["--ell-width"]=m.maxWidth):(h["--ell-wrap"]="nowrap",h["--ell-width"]=m.width);let g="";for(f in h)g+=f+":"+h[f]+";";t.style.cssText=g,m=window.getComputedStyle(t,"after");var y,{paddingBottom:w,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u}=m;let E={paddingBottom:w,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u};for(y in E)E[y]=parseInt(E[y]);var W,{paddingBottom:w,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u}=E,L=M+x+b,B=$+v+w,t=window.getComputedStyle(t,"before"),I=parseInt(t.borderWidth);a-L-I<0&&"left"===e&&(e="right"),n<c+L+I&&"right"===e&&(e="left"),p-B-I<0&&"top"===e&&(e="bottom");let T=5,A=5,C=9;switch(e=s<d+B+I&&"bottom"===e?"top":e){case"top":T=a-(L-i)/2,T=Math.max(T,5),T=Math.min(T,n-L-5),h["--ell-left"]=`${T}px`,h["--ell-top"]=`${p-B-I}px`,h["--ell-angle-left"]=`${a+i/2-I/2}px`,h["--ell-angle-top"]=`${p-I}px`;break;case"bottom":T=a-(L-i)/2,T=Math.max(T,5),T=Math.min(T,n-L-5),h["--ell-left"]=`${T}px`,h["--ell-top"]=`${d+I}px`,h["--ell-angle-left"]=`${a+i/2-2.5}px`,h["--ell-angle-top"]=`${d-I}px`;break;case"right":A=p-(B-o)/2,A=Math.max(A,5),A=Math.min(A,s-B-5),C=p+(o-I)/2,C=Math.max(C,9),C=Math.min(C,s-2*I-9),h["--ell-left"]=`${c+I}px`,h["--ell-top"]=`${A}px`,h["--ell-angle-left"]=`${c-I}px`,h["--ell-angle-top"]=`${C}px`;break;case"left":A=p-(B-o)/2,A=Math.max(A,5),A=Math.min(A,s-B-5),C=p+(o-I)/2,C=Math.max(C,9),C=Math.min(C,s-2*I-9),h["--ell-left"]=`${a-L-I}px`,h["--ell-top"]=`${A}px`,h["--ell-angle-left"]=`${a-I}px`,h["--ell-angle-top"]=`${C}px`}let H="";for(W in h)H+=W+":"+h[W]+";";let S=document.getElementById("simply-ellipsis-tooltip");S||(S=document.createElement("div"),S.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(S)),S.setAttribute("ell-value",l),S.style.cssText=H,k.forEach(t=>{S.classList.remove("has-ell-"+t.type)}),S.classList.add("has-ell-"+e),S.classList.add("has-ell"),S.classList.add("has-ell-visibility")}function o(){k.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.offsetWidth&&l(t,e.type)})}),t.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollHeight>t.offsetHeight&&l(t,e.type)})})}function l(e,l){var t=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(t)?(e.ontouchstart=t=>{t.preventDefault(),i(e,l)},e.ontouchend=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")},e.touchcancel=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")}):(e.onmouseover=()=>{i(e,l)},e.onmouseleave=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

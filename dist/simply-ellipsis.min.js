!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ellipsis=e()}(this,function(){"use strict";const k=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}],t=[{class:".ell-a-l",type:"left"},{class:".ell-a-r",type:"right"},{class:".ell-a-t",type:"top"},{class:".ell-a-b",type:"bottom"}],e=[{class:".ell-m-l",type:"left"},{class:".ell-m-r",type:"right"},{class:".ell-m-t",type:"top"},{class:".ell-m-b",type:"bottom"},{class:".elln-l",type:"left"},{class:".elln-r",type:"right"},{class:".elln-t",type:"top"},{class:".elln-b",type:"bottom"}];function i(t,e){var{innerText:l,clientWidth:i,clientHeight:o}=t;console.log(l);var{w:s,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:n,top:p,bottom:d,right:c}=t.getClientRects()[0];let r=t.getAttribute("ell-value");if(!r){if(!l)return;r=l,t.setAttribute("ell-value",r)}let h=t.style.cssText.split(";"),m={};h.forEach(t=>{t=t.split(":");m[t[0]]=t[1]});let f=window.getComputedStyle(t,"after");var u,g=parseInt(f.width);parseInt(f.maxWidth)<=g?(m["--ell-wrap"]="pre-wrap",m["--ell-min-width"]=f.maxWidth,m["--ell-width"]=f.maxWidth):(m["--ell-wrap"]="nowrap",m["--ell-width"]=f.width);let y="";for(u in m)y+=u+":"+m[u]+";";t.style.cssText=y,f=window.getComputedStyle(t,"after");var b,{paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:$,height:E,width:l,maxWidth:g}=f;let M={paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:$,height:E,width:l,maxWidth:g};for(b in M)M[b]=parseInt(M[b]);var W,{paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:$,height:E,width:l,maxWidth:g}=M,L=l+x+v,T=E+$+w,t=window.getComputedStyle(t,"before"),B=parseInt(t.borderWidth);n-L-B<0&&"left"===e&&(e="right"),s<c+L+B&&"right"===e&&(e="left"),p-T-B<0&&"top"===e&&(e="bottom");let I=5,A=5,C=9;switch(e=a<d+T+B&&"bottom"===e?"top":e){case"top":I=n-(L-i)/2,I=Math.max(I,5),I=Math.min(I,s-L-5),m["--ell-left"]=`${I}px`,m["--ell-top"]=`${p-T-B}px`,m["--ell-angle-left"]=`${n+i/2-B/2}px`,m["--ell-angle-top"]=`${p-B}px`;break;case"bottom":I=n-(L-i)/2,I=Math.max(I,5),I=Math.min(I,s-L-5),m["--ell-left"]=`${I}px`,m["--ell-top"]=`${d+B}px`,m["--ell-angle-left"]=`${n+i/2-2.5}px`,m["--ell-angle-top"]=`${d-B}px`;break;case"right":A=p-(T-o)/2,A=Math.max(A,5),A=Math.min(A,a-T-5),C=p+(o-B)/2,C=Math.max(C,9),C=Math.min(C,a-2*B-9),m["--ell-left"]=`${c+B}px`,m["--ell-top"]=`${A}px`,m["--ell-angle-left"]=`${c-B}px`,m["--ell-angle-top"]=`${C}px`;break;case"left":A=p-(T-o)/2,A=Math.max(A,5),A=Math.min(A,a-T-5),C=p+(o-B)/2,C=Math.max(C,9),C=Math.min(C,a-2*B-9),m["--ell-left"]=`${n-L-B}px`,m["--ell-top"]=`${A}px`,m["--ell-angle-left"]=`${n-B}px`,m["--ell-angle-top"]=`${C}px`}let S="";for(W in m)S+=W+":"+m[W]+";";let H=document.getElementById("simply-ellipsis-tooltip");H||(H=document.createElement("div"),H.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(H)),H.setAttribute("ell-value",r),H.style.cssText=S,k.forEach(t=>{H.classList.remove("has-ell-"+t.type)}),H.classList.add("has-ell-"+e),H.classList.add("has-ell"),H.classList.add("has-ell-visibility")}function o(){k.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.offsetWidth&&l(t,e.type)})}),t.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{l(t,e.type)})}),e.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollHeight>t.offsetHeight&&l(t,e.type)})})}function l(e,l){var t=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(t)?(e.ontouchstart=t=>{t.preventDefault(),i(e,l)},e.ontouchend=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")},e.touchcancel=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")}):(e.onmouseover=()=>{i(e,l)},e.onmouseleave=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

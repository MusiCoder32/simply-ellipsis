!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";const S=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}];function i(t,e){var{innerText:l,clientWidth:i,clientHeight:o}=t,{w:n,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:s,top:d,bottom:p,right:r}=t.getClientRects()[0];t.setAttribute("ell-value",l);let h=t.style.cssText.split(";"),c={};h.forEach(t=>{t=t.split(":");c[t[0]]=t[1]});let m=window.getComputedStyle(t,"after");var g,u=parseInt(m.width);parseInt(m.maxWidth)<=u?(c["--ell-wrap"]="pre-wrap",c["--ell-min-width"]=m.maxWidth,c["--ell-width"]=m.maxWidth):(c["--ell-wrap"]="nowrap",c["--ell-width"]=m.width);let f="";for(g in c)f+=g+":"+c[g]+";";t.style.cssText=f,m=window.getComputedStyle(t,"after");var w,{paddingBottom:x,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u}=m;let W={paddingBottom:x,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u};for(w in W)W[w]=parseInt(W[w]);var L,{paddingBottom:x,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:u}=W,E=M+y+b,T=$+v+x,t=window.getComputedStyle(t,"before"),B=parseInt(t.borderWidth);s-E-B<0&&"left"===e&&(e="right"),n<r+E+B&&"right"===e&&(e="left"),d-T-B<0&&"top"===e&&(e="bottom");let I=5,C=5,A=9;switch(e=a<p+T+B&&"bottom"===e?"top":e){case"top":I=s-(E-i)/2,I=Math.max(I,5),I=Math.min(I,n-E-5),c["--ell-left"]=`${I}px`,c["--ell-top"]=`${d-T-B}px`,c["--ell-angle-left"]=`${s+i/2-B/2}px`,c["--ell-angle-top"]=`${d-B}px`;break;case"bottom":I=s-(E-i)/2,I=Math.max(I,5),I=Math.min(I,n-E-5),c["--ell-left"]=`${I}px`,c["--ell-top"]=`${p+B}px`,c["--ell-angle-left"]=`${s+i/2-2.5}px`,c["--ell-angle-top"]=`${p-B}px`;break;case"right":C=d-(T-o)/2,C=Math.max(C,5),C=Math.min(C,a-T-5),A=d+(o-B)/2,A=Math.max(A,9),A=Math.min(A,a-2*B-9),c["--ell-left"]=`${r+B}px`,c["--ell-top"]=`${C}px`,c["--ell-angle-left"]=`${r-B}px`,c["--ell-angle-top"]=`${A}px`;break;case"left":C=d-(T-o)/2,C=Math.max(C,5),C=Math.min(C,a-T-5),A=d+(o-B)/2,A=Math.max(A,9),A=Math.min(A,a-2*B-9),c["--ell-left"]=`${s-E-B}px`,c["--ell-top"]=`${C}px`,c["--ell-angle-left"]=`${s-B}px`,c["--ell-angle-top"]=`${A}px`}let k="";for(L in c)k+=L+":"+c[L]+";";let R=document.getElementById("simply-ellipsis-tooltip");R||(R=document.createElement("div"),R.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(R)),R.setAttribute("ell-value",l),R.style.cssText=k,S.forEach(t=>{R.classList.remove("has-ell-"+t.type)}),R.classList.add("has-ell-"+e),R.classList.add("has-ell"),R.classList.add("has-ell-visibility")}function o(){S.forEach(l=>{document.querySelectorAll(l.class).forEach(t=>{var e;t.scrollWidth>t.clientWidth&&(e=navigator.userAgent.toLowerCase(),/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(e)?(t.ontouchstart=()=>{i(t,l.type)},t.ontouchend=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")}):(t.onmouseover=()=>{i(t,l.type)},t.onmouseleave=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")}))})})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

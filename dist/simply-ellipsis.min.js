!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";const S=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}];function i(t,e){var{innerText:l,clientWidth:i,clientHeight:o}=t,{w:n,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:s,top:d,bottom:p,right:r}=t.getClientRects()[0];t.setAttribute("ell-value",l);let c=t.style.cssText.split(";"),h={};c.forEach(t=>{t=t.split(":");h[t[0]]=t[1]});let m=window.getComputedStyle(t,"after");var u,f=parseInt(m.width);parseInt(m.maxWidth)<=f?(h["--ell-wrap"]="pre-wrap",h["--ell-min-width"]=m.maxWidth,h["--ell-width"]=m.maxWidth):(h["--ell-wrap"]="nowrap",h["--ell-width"]=m.width);let g="";for(u in h)g+=u+":"+h[u]+";";t.style.cssText=g,m=window.getComputedStyle(t,"after");var w,{paddingBottom:y,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:f}=m;let W={paddingBottom:y,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:f};for(w in W)W[w]=parseInt(W[w]);var L,{paddingBottom:y,paddingLeft:x,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:f}=W,E=M+x+b,B=$+v+y,t=window.getComputedStyle(t,"before"),I=parseInt(t.borderWidth);s-E-I<0&&"left"===e&&(e="right"),n<r+E+I&&"right"===e&&(e="left"),d-B-I<0&&"top"===e&&(e="bottom");let T=5,C=5,A=9;switch(e=a<p+B+I&&"bottom"===e?"top":e){case"top":T=s-(E-i)/2,T=Math.max(T,5),T=Math.min(T,n-E-5),h["--ell-left"]=`${T}px`,h["--ell-top"]=`${d-B-I}px`,h["--ell-angle-left"]=`${s+i/2-I/2}px`,h["--ell-angle-top"]=`${d-I}px`;break;case"bottom":T=s-(E-i)/2,T=Math.max(T,5),T=Math.min(T,n-E-5),h["--ell-left"]=`${T}px`,h["--ell-top"]=`${p+I}px`,h["--ell-angle-left"]=`${s+i/2-2.5}px`,h["--ell-angle-top"]=`${p-I}px`;break;case"right":C=d-(B-o)/2,C=Math.max(C,5),C=Math.min(C,a-B-5),A=d+(o-I)/2,A=Math.max(A,9),A=Math.min(A,a-2*I-9),h["--ell-left"]=`${r+I}px`,h["--ell-top"]=`${C}px`,h["--ell-angle-left"]=`${r-I}px`,h["--ell-angle-top"]=`${A}px`;break;case"left":C=d-(B-o)/2,C=Math.max(C,5),C=Math.min(C,a-B-5),A=d+(o-I)/2,A=Math.max(A,9),A=Math.min(A,a-2*I-9),h["--ell-left"]=`${s-E-I}px`,h["--ell-top"]=`${C}px`,h["--ell-angle-left"]=`${s-I}px`,h["--ell-angle-top"]=`${A}px`}let k="";for(L in h)k+=L+":"+h[L]+";";let R=document.getElementById("simply-ellipsis-tooltip");R||(R=document.createElement("div"),R.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(R)),R.setAttribute("ell-value",l),R.style.cssText=k,S.forEach(t=>{R.classList.remove("has-ell-"+t.type)}),R.classList.add("has-ell-"+e),R.classList.add("has-ell"),R.classList.add("has-ell-visibility")}function o(){S.forEach(l=>{document.querySelectorAll(l.class).forEach(e=>{var t;e.scrollWidth>e.clientWidth&&(t=navigator.userAgent.toLowerCase(),/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(t)?(e.ontouchstart=t=>{t.preventDefault(),i(e,l.type)},e.ontouchend=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")},e.touchcancel=t=>{t.preventDefault();let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")}):(e.onmouseover=()=>{i(e,l.type)},e.onmouseleave=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")}))})})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});

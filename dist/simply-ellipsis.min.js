!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ellipsis=t()}(this,function(){"use strict";const H=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}],e=[{class:".ell-a-l",type:"left"},{class:".ell-a-r",type:"right"},{class:".ell-a-t",type:"top"},{class:".ell-a-b",type:"bottom"}],t=[{class:".ell-m-l",type:"left"},{class:".ell-m-r",type:"right"},{class:".ell-m-t",type:"top"},{class:".ell-m-b",type:"bottom"},{class:".elln-l",type:"left"},{class:".elln-r",type:"right"},{class:".elln-t",type:"top"},{class:".elln-b",type:"bottom"}];function i(e,t){var{innerText:l,clientWidth:i,clientHeight:o}=e;console.log(l);var{w:s,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:n,top:p,bottom:d,right:c}=e.getClientRects()[0];let r=e.getAttribute("ell-value");if(!r){if(!l)return;r=l,e.setAttribute("ell-value",r)}let h=e.style.cssText.split(";"),m={};h.forEach(e=>{e=e.split(":");m[e[0]]=e[1]});let f=window.getComputedStyle(e,"after");var u,g=parseInt(f.width);parseInt(f.maxWidth)<=g?(m["--ell-wrap"]="pre-wrap",m["--ell-min-width"]=f.maxWidth,m["--ell-width"]=f.maxWidth):(m["--ell-wrap"]="nowrap",m["--ell-width"]=f.width);let y="";for(u in m)y+=u+":"+m[u]+";";e.style.cssText=y,f=window.getComputedStyle(e,"after");var b,{paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:E,height:$,width:l,maxWidth:g}=f;let M={paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:E,height:$,width:l,maxWidth:g};for(b in M)M[b]=parseInt(M[b]);var{paddingBottom:w,paddingLeft:x,paddingRight:v,paddingTop:E,height:$,width:l,maxWidth:g}=M,W=l+x+v,L=$+E+w,e=window.getComputedStyle(e,"before");console.log(e);var T,B=parseInt(e.borderWidth);n-W-B<0&&"left"===t&&(t="right"),s<c+W+B&&"right"===t&&(t="left"),p-L-B<0&&"top"===t&&(t="bottom");let I=5,A=5,C=9;switch(t=a<d+L+B&&"bottom"===t?"top":t){case"top":I=n-(W-i)/2,I=Math.max(I,5),I=Math.min(I,s-W-5),m["--ell-left"]=`${I}px`,m["--ell-top"]=`${p-L-B}px`,m["--ell-angle-left"]=`${n+i/2-B/2}px`,m["--ell-angle-top"]=`${p-B}px`;break;case"bottom":I=n-(W-i)/2,I=Math.max(I,5),I=Math.min(I,s-W-5),m["--ell-left"]=`${I}px`,m["--ell-top"]=`${d+B}px`,m["--ell-angle-left"]=`${n+i/2-2.5}px`,m["--ell-angle-top"]=`${d-B}px`;break;case"right":A=p-(L-o)/2,A=Math.max(A,5),A=Math.min(A,a-L-5),C=p+(o-B)/2,C=Math.max(C,9),C=Math.min(C,a-2*B-9),m["--ell-left"]=`${c+B}px`,m["--ell-top"]=`${A}px`,m["--ell-angle-left"]=`${c-B}px`,m["--ell-angle-top"]=`${C}px`;break;case"left":A=p-(L-o)/2,A=Math.max(A,5),A=Math.min(A,a-L-5),C=p+(o-B)/2,C=Math.max(C,9),C=Math.min(C,a-2*B-9),m["--ell-left"]=`${n-W-B}px`,m["--ell-top"]=`${A}px`,m["--ell-angle-left"]=`${n-B}px`,m["--ell-angle-top"]=`${C}px`}let S="";for(T in m)S+=T+":"+m[T]+";";let k=document.getElementById("simply-ellipsis-tooltip");k||(k=document.createElement("div"),k.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(k)),k.setAttribute("ell-value",r),k.style.cssText=S,H.forEach(e=>{k.classList.remove("has-ell-"+e.type)}),k.classList.add("has-ell-"+t),k.classList.add("has-ell"),k.classList.add("has-ell-visibility")}function a(){H.forEach(t=>{document.querySelectorAll(t.class).forEach(e=>{e.scrollWidth>e.offsetWidth&&l(e,t.type)})}),e.forEach(t=>{document.querySelectorAll(t.class).forEach(e=>{l(e,t.type)})}),t.forEach(t=>{document.querySelectorAll(t.class).forEach(e=>{e.scrollHeight>e.offsetHeight&&l(e,t.type)})})}function l(t,l){var e=navigator.userAgent.toLowerCase();/ipad|iphone|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile/.test(e)?(t.ontouchstart=e=>{e.preventDefault(),i(t,l)},t.ontouchend=e=>{e.preventDefault();let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")},t.touchcancel=e=>{e.preventDefault();let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")}):(t.onmouseover=()=>{i(t,l)},t.onmouseleave=()=>{let e=document.getElementById("simply-ellipsis-tooltip");e&&e.classList.remove("has-ell-visibility")})}return{setEll:a,setObserver:function(e,t="element-dark"){const l=document.documentElement;l.dataset.ellipsis=t;const i={subtree:!0,childList:!0},o=document.getElementById(e);e=function(t,e){let l=e||500,i;return function(){let e=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,t.apply(this,e)},l)}}(function(e,t){console.log(t),t.disconnect(),a(),t.observe(o,i)},1e3);const s=new MutationObserver(e);s.observe(o,i)}}});

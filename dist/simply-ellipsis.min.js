!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ellipsis=e()}(this,function(){"use strict";const S=[{class:".ell-l",type:"left"},{class:".ell-r",type:"right"},{class:".ell-t",type:"top"},{class:".ell-b",type:"bottom"}];function l(t,e){var{innerText:l,clientWidth:i,clientHeight:o}=t,{w:n,h:a}=window.innerWidth?{w:window.innerWidth,h:window.innerHeight}:(document.compatMode="BackCompat",{w:document.body.clientWidth,h:document.body.clientHeigth}),{left:s,top:d,bottom:p,right:h}=t.getClientRects()[0];t.setAttribute("ell-value",l);let r=t.style.cssText.split(";"),c={};r.forEach(t=>{t=t.split(":");c[t[0]]=t[1]});let m=window.getComputedStyle(t,"after");var f,g=parseInt(m.width);parseInt(m.maxWidth)<=g?(c["--ell-wrap"]="pre-wrap",c["--ell-min-width"]=m.maxWidth,c["--ell-width"]=m.maxWidth):(c["--ell-wrap"]="nowrap",c["--ell-width"]=m.width);let u="";for(f in c)u+=f+":"+c[f]+";";t.style.cssText=u,m=window.getComputedStyle(t,"after");var x,{paddingBottom:w,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:g}=m;let W={paddingBottom:w,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:g};for(x in W)W[x]=parseInt(W[x]);var E,{paddingBottom:w,paddingLeft:y,paddingRight:b,paddingTop:v,height:$,width:M,maxWidth:g}=W,L=M+y+b,T=$+v+w,t=window.getComputedStyle(t,"before"),B=parseInt(t.borderWidth);s-L-B<0&&"left"===e&&(e="right"),n<h+L+B&&"right"===e&&(e="left"),d-T-B<0&&"top"===e&&(e="bottom");let I=5,C=5,k=9;switch(e=a<p+T+B&&"bottom"===e?"top":e){case"top":I=s-(L-i)/2,I=Math.max(I,5),I=Math.min(I,n-L-5),c["--ell-left"]=`${I}px`,c["--ell-top"]=`${d-T-B}px`,c["--ell-angle-left"]=`${s+i/2-B/2}px`,c["--ell-angle-top"]=`${d-B}px`;break;case"bottom":I=s-(L-i)/2,I=Math.max(I,5),I=Math.min(I,n-L-5),c["--ell-left"]=`${I}px`,c["--ell-top"]=`${p+B}px`,c["--ell-angle-left"]=`${s+i/2-2.5}px`,c["--ell-angle-top"]=`${p-B}px`;break;case"right":C=d-(T-o)/2,C=Math.max(C,5),C=Math.min(C,a-T-5),k=d+(o-B)/2,k=Math.max(k,9),k=Math.min(k,a-2*B-9),c["--ell-left"]=`${h+B}px`,c["--ell-top"]=`${C}px`,c["--ell-angle-left"]=`${h-B}px`,c["--ell-angle-top"]=`${k}px`;break;case"left":C=d-(T-o)/2,C=Math.max(C,5),C=Math.min(C,a-T-5),k=d+(o-B)/2,k=Math.max(k,9),k=Math.min(k,a-2*B-9),c["--ell-left"]=`${s-L-B}px`,c["--ell-top"]=`${C}px`,c["--ell-angle-left"]=`${s-B}px`,c["--ell-angle-top"]=`${k}px`}let A="";for(E in c)A+=E+":"+c[E]+";";let R=document.getElementById("simply-ellipsis-tooltip");R||(R=document.createElement("div"),R.setAttribute("id","simply-ellipsis-tooltip"),document.body.append(R)),R.setAttribute("ell-value",l),R.style.cssText=A,S.forEach(t=>{R.classList.remove("has-ell-"+t.type)}),R.classList.add("has-ell-"+e),R.classList.add("has-ell"),R.classList.add("has-ell-visibility")}function o(){S.forEach(e=>{document.querySelectorAll(e.class).forEach(t=>{t.scrollWidth>t.clientWidth&&(t.mouseover=()=>{l(t,e.type)},t.mouseleave=()=>{let t=document.getElementById("simply-ellipsis-tooltip");t&&t.classList.remove("has-ell-visibility")})})})}return{setEll:o,setObserver:function(t){const l={subtree:!0,childList:!0},i=document.getElementById(t);t=function(e,t){let l=t||500,i;return function(){let t=arguments;i&&clearTimeout(i),i=setTimeout(()=>{i=null,e.apply(this,t)},l)}}(function(t,e){console.log(e),e.disconnect(),o(),e.observe(i,l)},1e3);const e=new MutationObserver(t);e.observe(i,l)}}});
